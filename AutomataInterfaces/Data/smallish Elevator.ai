Def: The_Carbin
	Var: Type = {up, down};
		Type1 = {0, 1, 2};
		Type2 = {Open, Close};
		Type Action;
		Type1 Position;
		Type2 Door;

	Location:
	{ 	
		s0:( true => ( ( ( Door = Open ) && ( Position = 0 ) ) || ( ( Door = Close ) && ( Position = 0 ) ) )|[0,1];
		s1:( ( ( Position = 2 ) && ( Action = down ) ) => ( Position = 1 ) )|[0,1];
		s2:( ( Action = up ) => ( Position = 2 ) )|[1,2];
		
	}

	Input: 
	{
		Action;
	}

	Output: 
	{
		Position; 
	}
	q0:
	{
		s0:( true => ( Action = down ) && ( Position = 0 ) )|[0,1];

	}
	Transition: 
	{
		t1:s0-->s0,( Action = down );
		t2:s0-->s1,( Action = up );
		t3:s1-->s2,( Action = up );
		t4:s2-->s2,( Action = up );
		t5:s2-->s1,( Action = down );
		t6:s1-->s0,( Action = down );
	}

Def: Controller
	Var: Type = {up, down};
		Type1 = {0, 1, 2};
		Type2 = {Open, Close};
		Type Action;
		Type1 Position;
		Type2 Door;


	Location:
	{
		r1:( ( usage = 1 ) => ( display = idle ) )|[0,1];
		r2:( ( usage = 1 ) => ( display = current_position ) )|[0,1];
		r3:( ( ( legaldestination = true ) && ( usage = 0 ) ) => ( display = route_to_destination ) )|[0,3];
	}

	Input:
	{
		usage;
		legaldestination;	
	}

 	Output: 
	{
		display;
	}
	q0:
	{
		r1:( ( usage = 1 ) => ( display = idle ) )|[0,1];
	}

	Transition:
	{
		t1:r1-->r2,( usage != 0 );
		t2:r2-->r3,( usage != 0 );
		t3:r3-->r1,( usage = 0 );
	}



